<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive Piste Salting (NaCl) Guide</title>
    <!-- Chosen Palette: "Calm Neutral & Deep Blue". Using a warm cream (#FBF9F1), a deep professional blue (#172554), a complementary accent (#3b82f6), and a highlight/alert accent (#f97316). -->
    <!-- Application Structure Plan: Designed a 6-section thematic SPA, prioritizing user tasks. Starts with an interactive 'Go/No Go' dashboard for quick decisions. Follows with deep dives: 'Fundamentals' (snow types), 'How it Works' (HTML/CSS process flow), 'Application' (interactive grain selector & Chart.js dosage chart), and 'Workflow' (HTML/CSS timeline). This task-oriented structure (quick answer first, details later) is more usable for a busy coach/manager than the report's linear chapters. -->
    <!-- Visualization & Content Choices:
        1. Report Info: Crucial Parameters (Temp, Moisture). Goal: Inform/Interact. Viz: Interactive JS 'Go/No Go' Module. Justification: Provides immediate, actionable answer, which is the user's primary goal.
        2. Report Info: 3 Snow Types. Goal: Compare/Organize. Viz: HTML/CSS Grid. Justification: Clear, static comparison of properties.
        3. Report Info: 4-Step Mechanism. Goal: Organize/Change. Viz: HTML/CSS Flexbox-based process flow diagram. Justification: Visually shows sequence without SVG/Mermaid.
        4. Report Info: Grain Size data. Goal: Compare. Viz: Interactive JS-powered Toggler (clickable cards). Justification: Allows user to explore options.
        5. Report Info: Dosage vs. Condition (Page 6 Chart). Goal: Compare. Viz: Chart.js Bar Chart. Interaction: JS onClick updates a summary text box. Justification: Best way to show quantitative comparison.
        6. Report Info: Workflow (T-60, etc). Goal: Change/Organize. Viz: HTML/CSS vertical timeline. Justification: Clearly shows temporal sequence, highlighting the critical 'gliding' step.
    -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #FBF9F1; /* Warm Cream */
            color: #1e293b; /* slate-800 */
        }
        header {
            background-color: #172554; /* Deep Navy */
        }
        .nav-link {
            color: #e2e8f0;
            transition: all 0.2s;
            padding: 4px 8px;
            border-radius: 6px;
        }
        .nav-link:hover {
            color: #ffffff;
            background-color: rgba(59, 130, 246, 0.5); /* Blue-500 */
        }
        h1, h2, h3 {
            font-family: 'Georgia', 'Times New Roman', serif;
            color: #172554; /* Deep Navy */
        }
        .card {
            background-color: #ffffff;
            border-radius: 0.75rem;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.07), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            border: 1px solid #e2e8f0;
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            height: 350px;
            max-height: 400px;
        }
        @media (max-width: 768px) {
            .chart-container {
                height: 300px;
            }
        }
        .btn {
            padding: 0.75rem 1.5rem;
            border-radius: 0.5rem;
            font-weight: 600;
            color: #ffffff;
            transition: all 0.2s;
        }
        .btn-blue {
            background-color: #3b82f6; /* Blue-500 */
        }
        .btn-blue:hover {
            background-color: #2563eb; /* Blue-600 */
        }
        .grain-card {
            border: 2px solid #e2e8f0;
            padding: 1rem;
            border-radius: 0.5rem;
            cursor: pointer;
            transition: all 0.2s;
        }
        .grain-card:hover, .grain-card.active {
            border-color: #3b82f6; /* Blue-500 */
            box-shadow: 0 4px 10px rgba(59, 130, 246, 0.2);
            transform: translateY(-2px);
        }
        .go {
            color: #15803d; /* Green-700 */
            background-color: #dcfce7; /* Green-100 */
            border: 1px solid #4ade80; /* Green-400 */
        }
        .no-go {
            color: #b91c1c; /* Red-700 */
            background-color: #fee2e2; /* Red-100 */
            border: 1px solid #f87171; /* Red-400 */
        }
    </style>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'navy': '#172554',
                        'cream': '#FBF9F1',
                        'accent': '#3b82f6',
                        'highlight': '#f97316',
                    }
                }
            }
        }
    </script>
</head>
<body class="antialiased">

    <!-- Header & Navigation -->
    <header class="sticky top-0 z-50 shadow-lg">
        <nav class="container mx-auto px-4 sm:px-6 lg:px-8 flex flex-wrap justify-between items-center py-4">
            <h1 class="text-2xl font-bold text-white">Guide Interactif Salage de Piste (NaCl)</h1>
            <div class="flex flex-wrap gap-x-4 gap-y-2 mt-4 md:mt-0">
                <a href="#dashboard" class="nav-link">Tableau de Bord</a>
                <a href="#fundamentals" class="nav-link">Fondamentaux</a>
                <a href="#mechanism" class="nav-link">M√©canisme</a>
                <a href="#application" class="nav-link">Application</a>
                <a href="#workflow" class="nav-link">Workflow</a>
            </div>
        </nav>
    </header>

    <!-- Main Content -->
    <main class="container mx-auto px-4 sm:px-6 lg:px-8 py-12">

        <!-- Section 1: At-a-Glance Dashboard -->
        <section id="dashboard" class="mb-16">
            <h2 class="text-4xl font-bold mb-4">Tableau de Bord de Salage des Pistes</h2>
            <p class="text-lg text-slate-700 mb-8">
                Bienvenue, Entra√Æneur/Manager. Cet outil vous aide √† prendre des d√©cisions rapides et scientifiquement fond√©es sur le salage des pistes. Commencez ici pour voir si le salage est une option viable aujourd'hui.
            </p>

            <div class="card p-6 lg:p-8">
                <h3 class="text-2xl font-bold mb-6 text-center">Outil de D√©cision Interactif : Go ou No-Go ?</h3>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6 items-center">
                    
                    <!-- Inputs -->
                    <div class="space-y-4">
                        <div>
                            <label for="snow-type" class="block text-sm font-medium text-slate-700">1. S√©lectionner le type de Neige :</label>
                            <select id="snow-type" class="mt-1 block w-full p-2 border border-slate-300 rounded-md shadow-sm focus:ring-accent focus:border-accent">
                                <option value="wet">Neige Mouill√©e (Humide)</option>
                                <option value="artificial">Neige Artificielle (Compact√©e)</option>
                                <option value="powder">Neige Poudreuse (S√®che)</option>
                            </select>
                        </div>
                        <div>
                            <label for="snow-temp" class="block text-sm font-medium text-slate-700">2. S√©lectionner la Temp√©rature de la Neige (¬∞C) :</label>
                            <select id="snow-temp" class="mt-1 block w-full p-2 border border-slate-300 rounded-md shadow-sm focus:ring-accent focus:border-accent">
                                <option value="ideal">Id√©ale (-2¬∞C √† +2¬∞C)</option>
                                <option value="warm">Chaude (> +2¬∞C)</option>
                                <option value="cold">Froide (< -2¬∞C)</option>
                                <option value="very-cold">Tr√®s Froide (< -5¬∞C)</option>
                            </select>
                        </div>
                         <div>
                            <label class="block text-sm font-medium text-slate-700">3. S√©lectionner l'Humidit√© :</label>
                            <div class="mt-2 flex gap-2">
                                <button id="btn-moist" class="flex-1 p-2 rounded-md border-2 border-accent bg-blue-100 text-accent font-semibold">Humide (> 3%)</button>
                                <button id="btn-dry" class="flex-1 p-2 rounded-md border-2 border-slate-300 bg-white text-slate-600 font-semibold">S√®che (< 3%)</button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Result -->
                    <div class="md:col-span-2 card p-6 h-full flex flex-col justify-center items-center text-center" style="background-color: #f8fafc;">
                        <div id="decision-result" class="p-8 rounded-lg text-3xl font-bold go">
                            GO - Salage Recommand√©
                        </div>
                        <p id="decision-reason" class="mt-4 text-slate-600 max-w-md">
                            Conditions id√©ales : Neige humide avec suffisamment d'humidit√© et une temp√©rature dans la plage optimale.
                        </p>
                    </div>

                </div>
            </div>
        </section>

        <!-- Section 2: Fundamentals -->
        <section id="fundamentals" class="mb-16 pt-16">
            <h2 class="text-4xl font-bold mb-4">1. Les Fondamentaux : Conna√Ætre Votre Neige</h2>
            <p class="text-lg text-slate-700 mb-8">
                Le salage r√©ussi d√©pend de la compr√©hension des propri√©t√©s de la neige. La neige n'est pas homog√®ne. Sa structure, sa densit√© et son humidit√© sont les facteurs critiques qui influencent directement l'efficacit√© de toutes les mesures de pr√©paration.
            </p>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                <!-- Powder Snow -->
                <div class="card p-6 border-l-4 border-red-500">
                    <h3 class="text-2xl font-bold mb-3">‚ùÑÔ∏è Neige Poudreuse (S√®che)</h3>
                    <p class="text-slate-600 mb-2"><strong>Densit√© :</strong> 100-300 kg/m¬≥</p>
                    <p class="text-slate-600 mb-2"><strong>Temp√©rature :</strong> Typiquement < -5¬∞C</p>
                    <p class="text-slate-600 mb-4"><strong>Humidit√© :</strong> Tr√®s Faible</p>
                    <strong class="text-red-700">Aptitude au Salage : NON ADAPT√â</strong>
                    <p class="text-sm text-slate-500 mt-2">Pas d'eau libre pr√©sente, donc le sel ne peut pas se dissoudre et reste inefficace.</p>
                </div>
                <!-- Wet Snow -->
                <div class="card p-6 border-l-4 border-green-500">
                    <h3 class="text-2xl font-bold mb-3">üíß Neige Mouill√©e (Humide)</h3>
                    <p class="text-slate-600 mb-2"><strong>Densit√© :</strong> 400-600 kg/m¬≥</p>
                    <p class="text-slate-600 mb-2"><strong>Temp√©rature :</strong> Autour de 0¬∞C</p>
                    <p class="text-slate-600 mb-4"><strong>Humidit√© :</strong> √âlev√©e (3-15%)</p>
                    <strong class="text-green-700">Aptitude au Salage : ID√âALEMENT ADAPT√â</strong>
                    <p class="text-sm text-slate-500 mt-2">Conditions id√©ales. Suffisamment d'eau libre est disponible pour que le sel se dissolve et agisse.</p>
                </div>
                <!-- Artificial Snow -->
                <div class="card p-6 border-l-4 border-blue-500">
                    <h3 class="text-2xl font-bold mb-3">‚öôÔ∏è Neige Artificielle</h3>
                    <p class="text-slate-600 mb-2"><strong>Densit√© :</strong> 350-500 kg/m¬≥</p>
                    <p class="text-slate-600 mb-2"><strong>Temp√©rature :</strong> Variable</p>
                    <p class="text-slate-600 mb-4"><strong>Structure :</strong> Grains Ronds</p>
                    <strong class="text-blue-700">Aptitude au Salage : BIEN ADAPT√â</strong>
                    <p class="text-sm text-slate-500 mt-2">R√©agit de mani√®re fiable au sel, souvent plus efficacement que la neige naturelle si l'humidit√© est pr√©sente.</p>
                </div>
            </div>
        </section>

        <!-- Section 3: Mechanism -->
        <section id="mechanism" class="mb-16 pt-16">
            <h2 class="text-4xl font-bold mb-4">2. Comment Cela Fonctionne : Le Processus en 4 √âtapes</h2>
            <p class="text-lg text-slate-700 mb-8">
                Le sel ne fait pas que "br√ªler" la neige. Il d√©clenche un processus physico-chimique pr√©cis qui extrait de la chaleur, ce qui provoque le regel de la neige en une couche plus dure et plus compacte.
            </p>
            
            <!-- HTML/CSS Process Flow -->
            <div class="flex flex-col md:flex-row justify-between items-stretch gap-4">
                <!-- Step 1 -->
                <div class="card p-4 flex-1 text-center">
                    <div class="text-3xl font-bold text-white bg-navy w-12 h-12 rounded-full flex items-center justify-center mx-auto mb-3">1</div>
                    <h3 class="text-xl font-bold mb-2">Dissolution</h3>
                    <p class="text-sm text-slate-600">Le sel (NaCl) se dissout dans l'eau libre de la neige humide. Ce processus est <strong>endothermique</strong> ‚Äî il absorbe la chaleur de la neige, la refroidissant.</p>
                </div>
                
                <div class="flex items-center justify-center text-4xl text-accent font-bold mx-2 md:rotate-0 rotate-90">‚Üí</div>

                <!-- Step 2 -->
                <div class="card p-4 flex-1 text-center">
                    <div class="text-3xl font-bold text-white bg-navy w-12 h-12 rounded-full flex items-center justify-center mx-auto mb-3">2</div>
                    <h3 class="text-xl font-bold mb-2">Abaissement Cryoscopique</h3>
                    <p class="text-sm text-slate-600">La nouvelle solution saline a un point de cong√©lation inf√©rieur (jusqu'√† -21¬∞C) √† celui de l'eau pure (0¬∞C).</p>
                </div>
                
                <div class="flex items-center justify-center text-4xl text-accent font-bold mx-2 md:rotate-0 rotate-90">‚Üí</div>

                <!-- Step 3 -->
                <div class="card p-4 flex-1 text-center">
                    <div class="text-3xl font-bold text-white bg-navy w-12 h-12 rounded-full flex items-center justify-center mx-auto mb-3">3</div>
                    <h3 class="text-xl font-bold mb-2">Fonte √† Court Terme</h3>
                    <p class="text-sm text-slate-600">Comme la solution saline est "trop froide" pour √™tre solide, la glace existante fond pour la diluer. Ceci est √©galement endothermique, absorbant <strong>plus de chaleur</strong> de la neige.</p>
                </div>
                
                <div class="flex items-center justify-center text-4xl text-accent font-bold mx-2 md:rotate-0 rotate-90">‚Üí</div>

                <!-- Step 4 -->
                <div class="card p-4 flex-1 text-center border-2 border-accent">
                    <div class="text-3xl font-bold text-white bg-accent w-12 h-12 rounded-full flex items-center justify-center mx-auto mb-3">4</div>
                    <h3 class="text-xl font-bold text-accent mb-2">Solidification</h3>
                    <p class="text-sm text-slate-600">La neige, maintenant significativement refroidie par l'extraction de chaleur, regel en une couche de glace plus dure, plus compacte et durable.</p>
                </div>
            </div>
        </section>

        <!-- Section 4: Application & Dosage -->
        <section id="application" class="mb-16 pt-16">
            <h2 class="text-4xl font-bold mb-4">3. Guide d'Application et de Dosage</h2>
            <p class="text-lg text-slate-700 mb-8">
                L'application correcte est cruciale. Le "Sel Doit Voler !" signifie que la distribution doit √™tre uniforme. La taille des grains d√©termine la vitesse et la profondeur de l'effet, tandis que le dosage d√©pend des conditions.
            </p>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                <!-- Grain Size Selector -->
                <div class="card p-6">
                    <h3 class="text-2xl font-bold mb-4">S√©lecteur de Taille de Grain</h3>
                    <div class="space-y-3 mb-4">
                        <div class="grain-card active" data-grain="mixture">
                            <h4 class="font-bold text-lg text-accent">M√©lange (Recommand√©)</h4>
                            <p class="text-sm text-slate-600">60% Gros / 40% Fin. La solution universelle.</p>
                        </div>
                        <div class="grain-card" data-grain="fine">
                            <h4 class="font-bold text-lg">Sel Fin (0.1-1mm)</h4>
                            <p class="text-sm text-slate-600">Action rapide, niveau de surface.</p>
                        </div>
                        <div class="grain-card" data-grain="coarse">
                            <h4 class="font-bold text-lg">Gros Sel (2-5mm)</h4>
                            <p class="text-sm text-slate-600">Action lente, durcissement en profondeur.</p>
                        </div>
                    </div>
                    <div id="grain-details" class="p-4 bg-blue-50 rounded-lg">
                        <h5 class="font-bold text-navy">M√©lange (60% Gros, 40% Fin)</h5>
                        <p class="text-sm text-slate-700 mt-1"><strong>Effet :</strong> Combine un durcissement rapide en surface avec un effet profond et durable. Le composant fin agit imm√©diatement tandis que le composant gros assure la stabilit√©. <br><strong>Id√©al pour :</strong> Usage universel.</p>
                    </div>
                </div>

                <!-- Dosage Chart -->
                <div class="card p-6">
                    <h3 class="text-2xl font-bold mb-4">Graphique de Dosage Interactif</h3>
                    <p class="text-sm text-slate-600 mb-4">Cliquez sur une barre du graphique pour voir le dosage recommand√©. La plage standard est de 100-200 g/m¬≤, mais augmente dans des conditions plus chaudes et plus humides.</p>
                    <div class="chart-container">
                        <canvas id="dosageChart"></canvas>
                    </div>
                    <p class="text-center text-navy font-semibold mt-4">
                        S√©lectionn√© : <span id="dosage-selection" class="text-accent font-bold">Mouill√©, +1¬∞C √† +3¬∞C (~180 g/m¬≤)</span>
                    </p>
                </div>
            </div>
        </section>

        <!-- Section 5: Workflow -->
        <section id="workflow" class="mb-16 pt-16">
            <h2 class="text-4xl font-bold mb-4">4. Le Workflow : T-60 au Temps de la Course</h2>
            <p class="text-lg text-slate-700 mb-8">
                Le timing est primordial. L'application du sel est un processus qui doit √™tre lanc√© bien avant la course pour permettre √† la r√©action chimique de s'achever. L'√©tape du "lissage" est critique pour une surface uniforme.
            </p>

            <!-- HTML/CSS Vertical Timeline -->
            <div class="relative max-w-2xl mx-auto border-l-4 border-accent pl-8 py-4">
                <!-- T-60 -->
                <div class="mb-8 relative">
                    <div class="absolute -left-11 -top-1 w-6 h-6 bg-navy rounded-full border-4 border-cream"></div>
                    <h3 class="text-xl font-bold text-navy">T-60 Minutes : Pr√©paration</h3>
                    <p class="text-slate-600">V√©rifier les conditions de neige (humidit√©, temp√©rature). Pr√©parer le sel (m√©lange de grains correct) et l'√©quipement d'√©pandage (√©pandeurs m√©caniques).</p>
                </div>
                <!-- T-45 -->
                <div class="mb-8 relative">
                    <div class="absolute -left-11 -top-1 w-6 h-6 bg-navy rounded-full border-4 border-cream"></div>
                    <h3 class="text-xl font-bold text-navy">T-45 Minutes : √âpandage</h3>
                    <p class="text-slate-600">Distribuer le sel uniform√©ment sur les zones cibles (ligne de course, virages cl√©s). Travailler avec le vent.</p>
                </div>
                <!-- T-30 (CRITICAL) -->
                <div class="mb-8 relative p-4 rounded-lg bg-orange-50 border-2 border-highlight">
                    <div class="absolute -left-12 -top-1 w-8 h-8 bg-highlight rounded-full border-4 border-cream shadow-lg"></div>
                    <h3 class="text-xl font-bold text-highlight-dark">T-30 √† T-25 Min : LISSAGE CRITIQUE</h3>
                    <p class="text-slate-700 font-semibold">Apr√®s 5-10 minutes de repos, la surface est molle. 4-5 "skieurs glisseurs" exp√©riment√©s doivent glisser (sans tourner) sur les zones sal√©es. Cela compacte la surface fondante et assure son regel en une couche de glace lisse et homog√®ne.</p>
                </div>
                <!-- T-10 -->
                <div class="mb-8 relative">
                    <div class="absolute -left-11 -top-1 w-6 h-6 bg-navy rounded-full border-4 border-cream"></div>
                    <h3 class="text-xl font-bold text-navy">T-10 Minutes : Contr√¥le</h3>
                    <p class="text-slate-600">Le manager de piste v√©rifie la duret√©, l'adh√©rence et l'uniformit√©. Retraiter les zones molles si n√©cessaire (avec du sel fin).</p>
                </div>
                <!-- T-0 -->
                <div class="relative">
                    <div class="absolute -left-11 -top-1 w-6 h-6 bg-green-500 rounded-full border-4 border-cream"></div>
                    <h3 class="text-xl font-bold text-green-700">T-0 : D√©part</h3>
                    <p class="text-slate-600">La piste est pr√™te. La surface est dure, adh√©rente et coh√©rente.</p>
                </div>
            </div>
        </section>

    </main>

    <footer class="bg-navy text-cream/70 p-8 text-center mt-16">
        <p>Ce guide interactif est bas√© sur le rapport "Use of NaCl for Piste Preparation" de Osi Inglin.</p>
        <p class="text-sm mt-2">Application con√ßue pour d√©monstration. Aucun SVG ou Mermaid JS utilis√©.</p>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', () => {

            // --- 1. Go/No-Go Dashboard Logic ---
            const snowType = document.getElementById('snow-type');
            const snowTemp = document.getElementById('snow-temp');
            const btnMoist = document.getElementById('btn-moist');
            const btnDry = document.getElementById('btn-dry');
            const resultBox = document.getElementById('decision-result');
            const reasonText = document.getElementById('decision-reason');
            let isMoist = true;

            function updateDecision() {
                const type = snowType.value;
                const temp = snowTemp.value;
                
                let go = true;
                let reason = '';

                if (type === 'powder') {
                    go = false;
                    reason = 'NON: Le salage n\'est pas adapt√© √† la neige poudreuse (trop s√®che).';
                } else if (temp === 'very-cold') {
                    go = false;
                    reason = 'NON: Temp√©rature < -5¬∞C. La neige est trop s√®che pour que le sel se dissolve.';
                } else if (!isMoist) {
                    go = false;
                    reason = 'NON: Humidit√© < 3%. Le sel n√©cessite de l\'eau libre pour se dissoudre et agir.';
                } else if (temp === 'cold') {
                    go = true;
                    reason = 'GO (Prudence): Conditions froides (-2¬∞C √† -5¬∞C). L\'effet sera lent. Assurez-vous d\'avoir > 3% d\'humidit√©.';
                } else if (temp === 'warm') {
                    go = true;
                    reason = 'GO (Dosage √âlev√©): Conditions chaudes (> +2¬∞C). Le sel fonctionnera, mais n√©cessite un dosage plus √©lev√© (voir graphique).';
                } else {
                    go = true;
                    reason = 'GO: Conditions id√©ales. La neige est humide et dans la plage de temp√©rature optimale (-2¬∞C √† +2¬∞C).';
                }

                if (go) {
                    resultBox.textContent = reason.split(':')[0].trim();
                    resultBox.classList.remove('no-go');
                    resultBox.classList.add('go');
                } else {
                    resultBox.textContent = reason.split(':')[0].trim();
                    resultBox.classList.remove('go');
                    resultBox.classList.add('no-go');
                }
                reasonText.textContent = reason.split(':')[1].trim();
            }

            btnMoist.addEventListener('click', () => {
                isMoist = true;
                btnMoist.classList.add('border-accent', 'bg-blue-100', 'text-accent');
                btnMoist.classList.remove('border-slate-300', 'bg-white', 'text-slate-600');
                btnDry.classList.add('border-slate-300', 'bg-white', 'text-slate-600');
                btnDry.classList.remove('border-accent', 'bg-blue-100', 'text-accent');
                updateDecision();
            });
            btnDry.addEventListener('click', () => {
                isMoist = false;
                btnDry.classList.add('border-accent', 'bg-blue-100', 'text-accent');
                btnDry.classList.remove('border-slate-300', 'bg-white', 'text-slate-600');
                btnMoist.classList.add('border-slate-300', 'bg-white', 'text-slate-600');
                btnMoist.classList.remove('border-accent', 'bg-blue-100', 'text-accent');
                updateDecision();
            });
            snowType.addEventListener('change', updateDecision);
            snowTemp.addEventListener('change', updateDecision);
            updateDecision(); // Initial check

            // --- 2. Grain Size Selector Logic ---
            const grainCards = document.querySelectorAll('.grain-card');
            const grainDetails = document.getElementById('grain-details');
            const grainData = {
                mixture: {
                    title: 'M√©lange (60% Gros, 40% Fin)',
                    desc: '<strong>Effet :</strong> Combine un durcissement rapide en surface avec un effet profond et durable. Le composant fin agit imm√©diatement tandis que le composant gros assure la stabilit√©. <br><strong>Id√©al pour :</strong> Usage universel.'
                },
                fine: {
                    title: 'Sel Fin (0.1-1mm)',
                    desc: '<strong>Effet :</strong> Surface (1-2 cm).<br><strong>Vitesse :</strong> Tr√®s Rapide (10-20 min).<br><strong>Id√©al pour :</strong> Durcissement de derni√®re minute, r√©ajustements, ou am√©lioration de la surface.'
                },
                coarse: {
                    title: 'Gros Sel (2-5mm)',
                    desc: '<strong>Effet :</strong> Profondeur (3-6 cm).<br><strong>Vitesse :</strong> Lente (30-60 min).<br><strong>Id√©al pour :</strong> Durcissement de base de toute la pente, effet durable, consolidation stable.'
                }
            };

            grainCards.forEach(card => {
                card.addEventListener('click', () => {
                    grainCards.forEach(c => c.classList.remove('active'));
                    card.classList.add('active');
                    const grainType = card.dataset.grain;
                    grainDetails.innerHTML = `<h5 class="font-bold text-navy">${grainData[grainType].title}</h5><p class="text-sm text-slate-700 mt-1">${grainData[grainType].desc}</p>`;
                });
            });

            // --- 3. Dosage Chart.js Logic ---
            const ctx = document.getElementById('dosageChart');
            const dosageSelection = document.getElementById('dosage-selection');
            const dosageLabels = ['L√©g√®rement humide, -1¬∞C', 'Mod√©r√©ment humide, 0¬∞C', 'Mouill√©, +1¬∞C √† +3¬∞C', 'Tr√®s mouill√©, > +3¬∞C'];
            const dosageData = [80, 120, 180, 250];

            if (ctx) {
                const dosageChart = new Chart(ctx, {
                    type: 'bar',
                    data: {
                        labels: dosageLabels,
                        datasets: [{
                            label: 'Dosage (g/m¬≤)',
                            data: dosageData,
                            backgroundColor: [
                                '#93c5fd', // blue-300
                                '#60a5fa', // blue-400
                                '#3b82f6', // blue-500
                                '#2563eb'  // blue-600
                            ],
                            borderColor: '#172554',
                            borderWidth: 1,
                            borderRadius: 4,
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        scales: {
                            y: {
                                beginAtZero: true,
                                title: {
                                    display: true,
                                    text: 'Dosage (g/m¬≤)'
                                }
                            }
                        },
                        plugins: {
                            legend: {
                                display: false
                            },
                            tooltip: {
                                displayColors: false,
                                callbacks: {
                                    title: () => '',
                                    label: (context) => {
                                        return `${context.label}: ${context.parsed.y} g/m¬≤`;
                                    }
                                }
                            }
                        },
                        onClick: (event, elements) => {
                            if (elements.length > 0) {
                                const index = elements[0].index;
                                const label = dosageLabels[index];
                                const data = dosageData[index];
                                dosageSelection.textContent = `${label} (~${data} g/m¬≤)`;
                            }
                        }
                    }
                });
            }

            // --- 4. Smooth Scroll Navigation ---
            document.querySelectorAll('a[href^="#"]').forEach(anchor => {
                anchor.addEventListener('click', function (e) {
                    e.preventDefault();
                    document.querySelector(this.getAttribute('href')).scrollIntoView({
                        behavior: 'smooth'
                    });
                });
            });
        });
    </script>
</body>
</html>
